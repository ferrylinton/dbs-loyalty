<!doctype html>
<html th:lang="${#locale}" xmlns:th="http://www.org">

<head th:replace="fragment/head.html :: content(title=#{menu.user})"></head>

<body>
	<div th:replace="fragment/navbar.html :: content"></div>
	<div class="bg-white">
		<nav aria-label="breadcrumb">
			<ol class="breadcrumb border-bottom">
				<li class="breadcrumb-item"><a th:href="@{/}" th:text="#{menu.home}"></a></li>
				<li class="breadcrumb-item active" aria-current="page" th:text="#{menu.user}"></li>
			</ol>
		</nav> 
		<div class="container-fluid pb-3">
			<div class="min-height border p-3">
				<div class="row no-gutters mb-3">
					<div class="col-10 col-sm-8 col-md-5 col-lg-4 col-xl-3 mr-auto">
						<div th:replace="fragment/search.html :: content(@{/user}, #{label.email})"></div>
					</div>
					<div class="col-auto">
						<a class="btn btn-light text-secondary border" th:href="@{/user/0}">
							<i class="icon-plus"></i>
						</a>
					</div>
				</div>
				<div class="table-responsive mb-3" th:if="${page.getTotalElements() > 0}">
					<table class="table table-sm table-striped table-hover border mb-0" style="min-width: 550px">
						<thead>
							<tr>
								<th width="40px"></th>
								<th width="40px">#</th>
								<th width="220px" th:utext="${@linkService.sortLink('name')}"></th>
								<th width="220px" th:utext="${@linkService.sortLink('email')}"></th>
								<th width="80px" th:utext="${@linkService.sortLink('activated')}"></th>
								<th th:utext="${@linkService.sortLink('role.name')}"></th>
							</tr>
						</thead>
						<tbody>
							<tr th:each="user,row : ${page}">
								<td class="py-0 px-1">
									<div class="dropdown">
										<button type="button" class="btn btn-default dropdown-toggle px-1 py-0 font-12" id="dropdownMenuButton" data-boundary="window" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
										 	<i class="icon-cog"></i>
										</button>
										<div class="dropdown-menu py-0 shadow" aria-labelledby="dropdownMenuButton">
										    <a class="dropdown-item pl-1" th:href="@{|/user/${user.id}|}">
										    	<i class="icon-edit"></i> <span th:text="#{label.edit}"></span>
										    </a>
										    <!--  
										    <a class="dropdown-item pl-1" th:href="@{|/password/${user.email}|}" th:if="${#request.getUserPrincipal().getName() != user.email}">
										    	<i class="icon-lock"></i> <span th:text="#{label.changePassword}"></span>
										    </a>
										    -->
										   	<div class="dropdown-divider my-0"></div>
											<a class="dropdown-item pl-1 text-danger" th:href="@{|/user/${user.id}|}" onclick="return Data.confirm(this)">
												<i class="icon-trash"></i> <span th:text="#{label.delete}"></span>
											</a>
										</div>
									</div>
								</td>
								<td th:text="${row.count + (page.number * page.size)}"></td>
								<td th:text="${user.name}"></td>
								<td th:text="${user.email}"></td>
								<td><i th:class="${user.activated ? 'icon-ok text-success' : 'icon-cancel text-danger'}"></i></td>
								<td th:text="${user.role == null ? '-' : user.role.name}"></td>
							</tr>
						</tbody>
					</table>
				</div>
				<div class="border alert alert-light text-center" role="alert" th:if="${page.getTotalElements() == 0}">
					<i class="icon-attention"></i> <span th:text="#{message.dataNotFound}"></span>
				</div>
				<div th:replace="fragment/pager.html :: content"></div>
			</div>
		</div>
	</div>
	<div th:replace="fragment/footer.html :: content"></div>
    <div th:replace="fragment/scripts.html :: content"></div>
</body>

</html>