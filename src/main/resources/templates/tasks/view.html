<!doctype html>
<html th:lang="${#locale}" xmlns:th="http://www.thymeleaf.org">

<head th:replace="fragment/head.html :: content(title=#{menu.task})"></head>

<body>
	<div th:replace="fragment/navbar.html :: content"></div>
	<div class="bg-white">
		<nav aria-label="breadcrumb">
			<ol class="breadcrumb border-bottom">
				<li class="breadcrumb-item"><a th:href="@{/}" th:text="#{menu.home}"></a></li>
				<li class="breadcrumb-item active" aria-current="page" th:text="#{menu.task}"></li>
			</ol>
		</nav>
		<div class="container-fluid pb-3">
			<div class="min-height border p-3">
				<div class="row no-gutters mb-3">
					<div class="col-12 col-sm-12 col-md-10 col-lg-8 col-xl-8">
						<form th:action="@{/tasks}" method="get" autocomplete="off" >
							<div class="input-group">
								<input class="form-control" name="ky" maxlength="40" th:value="${param.ky}" th:placeholder="#{label.keyword}" />
								<div class="input-group-append">
									<select name="st" class="custom-select text-secondary border-right-0" id="status">
									    <option value="ALL" selected th:text="#{ALL_STATUS}" th:selected="${st.name() == 'ALL'}"></option>
									    <option value="PENDING" th:text="#{PENDING}" th:selected="${st.name() == 'PENDING'}">PENDING</option>
									    <option value="REJECTED" th:text="#{REJECTED}" th:selected="${st.name() == 'REJECTED'}">REJECTED</option>
									    <option value="VERIFIED"th:text="#{VERIFIED}" th:selected="${st.name() == 'VERIFIED'}">VERIFIED</option>
									    <option value="FAILED"th:text="#{FAILED}" th:selected="${st.name() == 'FAILED'}">FAILED</option>
									</select>
									<select name="op" class="custom-select text-secondary border-right-0" id="op">
									    <option value="ALL" selected th:text="#{ALL_OPERATION}" th:selected="${op.name() == 'ALL'}"></option>
									    <option value="ADD" th:text="#{ADD}" th:selected="${op.name() == 'ADD'}">ADD</option>
									    <option value="MODIFY" th:text="#{MODIFY}" th:selected="${op.name() == 'MODIFY'}">MODIFY</option>
									    <option value="DELETE"th:text="#{DELETE}" th:selected="${op.name() == 'DELETE'}">DELETE</option>
									</select>
									<button class="btn btn-light border text-secondary" type="submit">
										<i class="icon-search"></i>
									</button>
									<a class="btn btn-light border text-secondary" th:href="@{/tasks}">
										<i class="icon-arrows-cw"></i>
									</a>
								</div>
							</div>
						</form>
					</div>
				</div>
				<div class="table-responsive" th:if="${page.getTotalElements() > 0}">
					<table class="table table-sm table-hover table-striped border" style="min-width: 700px;">
						<thead>
							<tr>
								<th width="40px"></th>
								<th>#</th>
								<th th:utext="${@linkService.sortLink('madeDate')}"></th>
								<th th:utext="${@linkService.sortLink('maker')}"></th>
								<th th:utext="${@linkService.sortLink('taskDataType')}"></th>
								<th th:utext="${@linkService.sortLink('taskOperation')}"></th>
								<th th:utext="${@linkService.sortLink('taskStatus')}"></th>
							</tr>
						</thead>
						<tbody th:with="format=${@environment.getProperty('application.date-time-format')}">
							<tr th:each="task,row : ${page}">
								<td class="py-0 px-1">
									<div class="dropdown">
										<button type="button" class="btn btn-default dropdown-toggle px-1 py-0 font-12" id="dropdownMenuButton" data-boundary="window" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
										 	<i class="icon-cog"></i>
										</button>
										<div class="dropdown-menu py-0 shadow" aria-labelledby="dropdownMenuButton">
										    <a class="dropdown-item pl-1" th:href="@{|/tasks/${task.id}|}">
										    	<i class="icon-eye"></i> <span th:text="#{label.view}"></span>
										    </a>
										</div>
									</div>
								</td>
								<td th:text="${row.count + (page.number * page.size)}"></td>
								<td th:text="${#dates.format(task.madeDate, format)}"></td>
								<td th:text="${task.maker}"></td>
								<td th:text="#{${task.taskDataType}}"></td>
								<td th:text="#{${task.taskOperation}}"></td>
								<td th:text="#{${task.taskStatus}}"></td>
							</tr>
					</table>
				</div>
				<div class="border alert alert-light text-center" role="alert" th:if="${page.getTotalElements() == 0}">
					<i class="icon-attention"></i> <span th:text="#{message.dataNotFound}"></span>
				</div>
				<div th:replace="fragment/pager.html :: content"></div>
			</div>
		</div>
	</div>
	<div th:replace="fragment/footer.html :: content"></div>
    <div th:replace="fragment/scripts.html :: content"></div>
</body>

</html>