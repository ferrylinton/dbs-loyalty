<!doctype html>
<html th:lang="${#locale}" xmlns:th="http://www.thymeleaf.org">

<head th:replace="fragment/head.html :: content(title=#{logLogin})"></head>

<body>
	<div th:replace="fragment/navbar.html :: content"></div>
	<div class="bg-white">
	    <nav aria-label="breadcrumb">
	        <ol class="breadcrumb border-bottom">
	            <li class="breadcrumb-item">
	            	<a th:href="@{/}" class="text-decoration-none">
	            		<span th:text="#{home}"></span>
	            	</a>
	            </li>
	            <li class="breadcrumb-item active" aria-current="page">
	            	<span th:text="#{logLogin}"></span>
	            </li>
	        </ol>
	    </nav>
		<div class="container-fluid pb-3">
			<div class="min-height border p-3">
				<div class="row no-gutters mb-3">
					<div class="col-12 col-sm-8 col-md-6 col-lg-5 col-xl-4">
						<form th:action="@{/loglogin}" method="get" autocomplete="off" >
							<div class="form-row mb-1">
								<div class="col-5 pr-0">
									<input type="text" class="form-control bg-white border-right-0" name="sd" th:value="${param.sd}" th:placeholder="#{startDate}" readonly="readonly">
								</div>
								<div class="col-7 pl-0">
									<div class="input-group">
		                                <input type="text" class="form-control bg-white" name="ed" th:value="${param.ed}" th:placeholder="#{endDate}" readonly="readonly">
										<div class="input-group-append">
		                                    <div class="input-group-text bg-light"><i class="icon-calendar"></i></div>
		                                </div>
									</div>
								</div>
							</div>
                            <div class="input-group">
                                <input class="form-control" name="ky" maxlength="40" th:value="${param.ky}" th:placeholder="#{keyword}" />
                                <div class="input-group-append">
                                    <button class="btn btn-light border text-secondary" type="submit">
                                        <i class="icon-search"></i>
                                    </button>
                                    <a class="btn btn-light border text-secondary" th:href="@{/loglogin}">
                                        <i class="icon-arrows-cw"></i>
                                    </a>
                                </div>
                            </div>
						</form>
					</div>
				</div>
				<div class="table-responsive" th:if="${page.getTotalElements() > 0}">
	                <table class="table table-sm table-striped table-hover border" style="min-width: 700px;">
                        <thead>
                            <tr th:with="ascending=${order.getDirection().name() == 'ASC'}">
                                <th class="text-center" width="60px">#</th>
                                <th width="150px" th:with="sort=|&sort=createdDate,${ascending ? 'DESC' : 'ASC'}|">
                                	<a th:href="@{|?page=${page.getNumber()}${params}${sort}|}" class="text-decoration-none">
                                		<span th:text="#{date}"></span> <i th:classappend="${ascending} ? 'icon-up' : 'icon-down'"></i>
                                	</a>
                                </th>
                                <th width="80px" th:text="#{loginStatus}"></th>
                                <th width="180px" th:text="#{ip}"></th>
                                <th width="190px" th:text="#{username}"></th>
                                <th th:text="#{browser}"></th>
                            </tr>
                        </thead>
						<tbody>
							<tr th:each="logLogin,row : ${page}">
								<td class="text-center" th:text="${row.count + (page.number * page.size)}"></td>
								<td th:text="${#dates.format(logLogin.createdDate, @environment.getProperty('application.date-time-format'))}"></td>
								<td>
									<span th:class="${logLogin.loginStatus.name() == 'SUCCESS'} ? 'badge badge-success' : 'badge badge-danger'" th:text="#{${logLogin.loginStatus}}">Success</span>
								</td>
								<td th:text="${logLogin.ip}"></td>
								<td th:text="${#strings.isEmpty(logLogin.username)} ? '-' : ${logLogin.username}"></td>
								<td th:text="${logLogin.browser}"></td>
							</tr>
						</tbody>
					</table>
				</div>
                <div class="border alert alert-light text-center" role="alert" th:if="${page.getTotalElements() == 0}">
                    <i class="icon-attention"></i> <span th:text="#{message.dataNotFound}"></span>
                </div>
                <th:block th:if="${page != null && page.getTotalPages() > 1}">
                    <a class="btn btn-sm btn-secondary" th:href="@{|?${previous}${params}|}" th:classappend="${not page.hasPrevious()} ? 'disabled'">
                    	<i class="icon-left-open"></i> <span th:text="#{previous}"></span>
                    </a>
                    <a class="btn btn-sm btn-secondary" th:href="@{|?${next}${params}|}" th:classappend="${not page.hasNext()} ? 'disabled'">
                    	<span th:text="#{next}"></span> <i class="icon-right-open"></i>
                    </a>
                </th:block>
			</div>
		</div>
	</div>
	<div th:replace="fragment/footer.html :: content"></div>
    <div th:replace="fragment/scripts.html :: content"></div>
</body>

</html>